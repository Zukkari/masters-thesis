% Institute of Computer Science thesis template
% authors: Sven Laur, Liina Kamm
% last change Tõnu Tamme 03.05.2019
%--
% Compilation instructions:
% 1. Choose main language on line 55-56 (English or Estonian)
% 2. Compile 1-3 times to get refences right
% pdflatex bachelors-thesis-template
% bibtex bachelors-thesis-template
%--
% Please use references like this:
% <text> <non-breaking-space> <cite/ref-command> <punctuation>
% This is an example~\cite{example}.

\documentclass[12pt]{article}

% A package for setting layout and margins for your thesis
\usepackage[a4paper]{geometry}
\usepackage{pdflscape}

%%=== A4 page setup ===
%\setlength{\paperwidth}{21.0cm}
%\setlength{\paperheight}{29.7cm}
%\setlength{\textwidth}{16cm}
%\setlength{\textheight}{25cm}


% When you write in Estonian then you want to use text with right character set
% By default LaTeX does not know what to do with õäöu letters. You have to specify
% a correct input and font encoding. For that you have to Google the Web
%
% For TexShop under MacOS X. The right lines are
%\usepackage[applemac]{inputenc}
%\usepackage[T1]{fontenc} %Absolutely critical for *hyphenation* of words with non-ASCII letters.
%
% For Windows and Linux the right magic lines are
% \usepackage[latin1]{inputenc}
% \usepackage[latin5]{inputenc}
%
\usepackage[utf8]{inputenc} %standard encoding since 2018 (can be commented out?)
\usepackage[T1]{fontenc} %Absolutely critical for *hyphenation* of words with non-ASCII letters.

% Typeset text in Times Roman instead of Computer Modern (EC)
\usepackage{times}

% Suggested packages:
\usepackage{microtype}  %towards typographic perfection...
\usepackage{inconsolata} %nicer font for code listings. (Use \ttfamily for lstinline bastype)

\usepackage[section]{placeins}

% Use package babel for English or Estonian
% If you use Estonian make sure that Estonian hyphenation is installed
% - hypen-estonian or eehyp packages
%
%===Choose the main language in thesis
\usepackage[estonian, english]{babel} %the thesis is in English
%\usepackage[english, estonian]{babel} %the thesis is in Estonian


% Change Babel document elements
\addto\captionsestonian{%
    \renewcommand{\refname}{Viidatud kirjandus}%
    \renewcommand{\appendixname}{Lisad}%
}


% If you have problems with Estonian keywords in the bibliography
%\usepackage{biblatex}
%\usepackage[backend=biber]{biblatex}
%\usepackage[style=alphabetic]{biblatex}
%% plain --> \usepackage[style=numeric]{biblatex}
%% abbrv --> \usepackage[style=numeric,firstinits=true]{biblatex}
%% unsrt --> \usepackage[style=numeric,sorting=none]{biblatex}
%% alpha --> \usepackage[style=alphabetic]{biblatex}
%\DefineBibliographyStrings{estonian}{and={ja}}
%\addbibresource{masters-thesis-template.bib}


% General packages for math in general, theorems and symbols
% Read ftp://ftp.ams.org/ams/doc/amsmath/short-math-guide.pdf for further information
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}

% Optional calligraphic fonts
% \usepackage[mathscr]{eucal}

% Print a dot instead of colon in table or figure captions
\usepackage[labelsep=period]{caption}

% Packages for building tables and tabulars
\usepackage{array}
\usepackage{tabu}   % Wide lines in tables
\usepackage{xspace} % Non-eatable spaces in macros

% Including graphical images and setting the figure directory
\usepackage{graphicx}
\graphicspath{{figures/}}

% Packages for getting clickable links in PDF file
%\usepackage{hyperref}
\usepackage[hidelinks]{hyperref} %hide red (blue,green) boxes around links
\usepackage[all]{hypcap}

\usepackage{dirtytalk}

% Packages for defining colourful text together with some colours
\usepackage{color}
\usepackage{xcolor}
\definecolor{dkgreen}{rgb}{0,0.6,0}
%\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\usepackage{titlesec}

\setcounter{secnumdepth}{4}

\titleformat{\paragraph}
{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titlespacing*{\paragraph}
{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}

% Standard package for drawing algorithms
% Since the thesis in article format we must define \chapter for
% the package algorithm2e (otherwise obscure errors occur)
\let\chapter\section
\usepackage[ruled, vlined, linesnumbered]{algorithm2e}

% Fix a  set of keywords which you use inside algorithms
\SetKw{True}{true}
\SetKw{False}{false}
\SetKwData{typeInt}{Int}
\SetKwData{typeRat}{Rat}
\SetKwData{Defined}{Defined}
\SetKwFunction{parseStatement}{parseStatement}


% Nice todo notes
\usepackage{todonotes}

% comments and verbatim text (code)
\usepackage{verbatim}


% Proper way to create coloured code listings
\usepackage{listings}
\lstset{
%language=python,                % the language of the code
    language=Java,
    basicstyle=\footnotesize,        % the size of the fonts that are used for the code
    numbers=left,                   % where to put the line-numbers
    numberstyle=\footnotesize,      % the size of the fonts that are used for the line-numbers
    numberstyle=\tiny\color{gray},
    stepnumber=1,                    % the step between two line-numbers. If it's 1, each line
    % will be numbered
    numbersep=5pt,                   % how far the line-numbers are from the code
    backgroundcolor=\color{white},   % choose the background color. You must add \usepackage{color}
    showspaces=false,                % show spaces adding particular underscores
    showstringspaces=false,          % underline spaces within strings
    showtabs=false,                  % show tabs within strings adding particular underscores
    frame = lines,
    %frame=single,                   % adds a frame around the code
    rulecolor=\color{black},           % if not set, the frame-color may be changed on line-breaks within
    % not-black text (e.g. commens (green here))
    tabsize=2,                       % sets default tabsize to 2 spaces
    captionpos=b,                    % sets the caption-position to bottom
    breaklines=true,                 % sets automatic line breaking
    breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
    %title=\lstname,                 % show the filename of files included with \lstinputlisting;
    % also try caption instead of title
    keywordstyle=\color{blue},       % keyword style
    commentstyle=\color{dkgreen},    % comment style
    stringstyle=\color{mauve},       % string literal style
    escapeinside={\%*}{*)},          % if you want to add a comment within your code
    morekeywords={*,game, fun}       % if you want to add more keywords to the set
}


% Obscure packages to write logic formulae and program semantics
% Unless you do a bachelor thesis on program semantics or static code analysis you do not need that
% http://logicmatters.net/resources/ndexamples/proofsty3.html <= writing type rules => use semantic::inference
% ftp://tug.ctan.org/tex-archive/macros/latex/contrib/semantic/semantic.pdf
\usepackage{proof}
\usepackage{semantic}
\usepackage[numbers]{natbib}
\usepackage{graphicx}
\usepackage{graphicx}
\usepackage{graphicx}
\usepackage{graphicx}
\usepackage{graphicx}
\setlength{\inferLineSkip}{4pt}
\def\predicatebegin #1\predicateend{$\Gamma \vdash #1$}

% If you really want to draw figures in LaTeX use packages tikz or pstricks
% However, getting a corresponding illustrations is really painful


% Define your favorite macros that you use inside the thesis
% Name followed by non-removable space
\newcommand{\proveit}{ProveIt\xspace}

% Macros that make sure that the math mode is set
\newcommand{\typeF}[1] {\ensuremath{\mathsf{type_{#1}}}\xspace}
\newcommand{\opDiv}{\ensuremath{\backslash \mathsf{div}}\xspace}

% Nice Todo box
\newcommand{\TODO}{\todo[inline]}

% A way to define theorems and lemmata
\newtheorem{theorem}{Theorem}


%%% BEGIN DOCUMENT
\begin{document}

%===BEGIN TITLE PAGE
    \thispagestyle{empty}
    \begin{center}

        \iflanguage{english}{%
            \large
            UNIVERSITY OF TARTU\\%[2mm]
            Institute of Computer Science\\
            Computer Science Curriculum\\%[2mm]
        }{%
            TARTU ÜLIKOOL\\
            Arvutiteaduse instituut\\
            Informaatika õppekava\\%[2mm]
        }%\iflanguage

%\vspace*{\stretch{5}}
        \vspace{25mm}

        \Large Stanislav Mõškovski

        \vspace{4mm}

        \huge Building a tool for detecting code smells in Android application code

%\vspace*{\stretch{7}}
        \vspace{20mm}

        \iflanguage{english}{%
            \Large Master's Thesis (30 ECTS)
        }{%
            \Large Bakalaureusetöö (9 EAP)
        }%\iflanguage

    \end{center}

    \vspace{2mm}

    \begin{flushright}
    {
        \setlength{\extrarowheight}{5pt}
        \begin{tabular}{r l}
            \sffamily \iflanguage{english}{Supervisor}{Juhendaja}: & \sffamily Kristiina Rahkema, MSc \\
            \sffamily \iflanguage{english}{Co-supervisor}{Juhendaja}: & \sffamily Dietmar Pfahl, PhD
        \end{tabular}
    }
    \end{flushright}

%\vspace*{\stretch{3}}
%\vspace{10mm}

    \vfill
    \centerline{Tartu 2020}

%===END TITLE PAGE

% If the thesis is printed on both sides of the page then
% the second page must be must be empty. Comment this out
% if you print only to one side of the page comment this out
%\newpage
%\thispagestyle{empty}
%\phantom{Text to fill the page}
% END OF EXTRA PAGE WITHOUT NUMBER


%===COMPULSORY INFO PAGE
    \newpage

%=== Info in English
    \newcommand\EngInfo{{%
        \selectlanguage{english}
        \noindent\textbf{\large Building a tool for detecting code smells in Android application code}

        \vspace*{3ex}

        \noindent\textbf{Abstract:}

        \noindent
        \TODO{
            Write abstract text here
        }

        \vspace*{1ex}

        \noindent\textbf{Keywords:}\\
        \TODO{List of keywords}
%Layout, formatting, template

        \vspace*{1ex}

        \noindent\textbf{CERCS:}\TODO{CERCS code and name:~\url{https://www.etis.ee/Portal/Classifiers/Details/d3717f7b-bec8-4cd9-8ea4-c89cd56ca46e}}

        \vspace*{1ex}
    }}%\newcommand\EngInfo


%=== Info in Estonian
    \newcommand\EstInfo{{%
        \selectlanguage{estonian}
        \noindent\textbf{\large Building a tool for detecting code smells in Android application code}
        \vspace*{1ex}

        \noindent\textbf{Lühikokkuvõte:}

%\noindent ...

        \TODO{One or two sentences providing a basic introduction to the field, comprehensible to a scientist in
        any discipline.}
        \TODO{Two to three sentences of
        more detailed background, comprehensible to scientists in related disciplines.}
        \TODO{One sentence clearly stating the general problem being addressed by this particular
        study.}
        \TODO{One sentence summarising the main result (with the words ``here we show´´ or their equivalent).}
        \TODO{Two or three sentences explaining what
        the main result reveals in direct
        comparison to what was thought to be the case previously, or how the main result adds to previous knowledge.}
        \TODO{One or two sentences to put the results into a more general context.}
        \TODO{Two or three sentences to provide a
        broader perspective, readily
        comprehensible to a scientist in any
        discipline, may be included in the first paragraph
        if the editor considers that the accessibility of
        the paper is significantly enhanced by their inclusion.}

        \vspace*{1ex}

        \noindent\textbf{Võtmesõnad:}\\
        \TODO{List of keywords}
%Layout, formatting, template

        \vspace*{1ex}

        \noindent\textbf{CERCS:}\TODO{CERCS kood ja nimetus:~\url{https://www.etis.ee/Portal/Classifiers/Details/d3717f7b-bec8-4cd9-8ea4-c89cd56ca46e}}

        \vspace*{1ex}
    }}%\newcommand\EstInfo


%=== Determine the order of languages on Info page
    \iflanguage{english}{\EngInfo}{\EstInfo}
    \iflanguage{estonian}{\EngInfo}{\EstInfo}


    \newpage
    \tableofcontents

    \newpage

    \section{Introduction}\label{sec:introduction}

    \subsection{Research context}\label{subsec:research-context}

    \TODO{
        Describe what code smells are.
        Describe how code smells are different from bugs.
        Shortly about previous research and how we plan to be different.
    }

    \subsection{Research motivation}\label{subsec:research-motivation}

    \TODO{
        Describe why solution proposed in this thesis is useful.
        Goals of the thesis:
        \begin{itemize}
            \item Develop a tool, describe why it would be useful from different perspectives (developers, project managers, data scientists)
            \item Extend the body of knowledge about the occurrence of code smells in Android applications (extend the number of code smells,
            provide analysis results, compare the results with with already published results, additional results for code smells not
            yet published in the literature)
        \end{itemize}
    }

    \subsection{Thesis outline}\label{subsec:thesis-outline}

    \TODO{
        Shortly describe structure of the thesis.
        What does each chapter tell the reader?
    }

    \newpage

    \section{Background}\label{sec:background}

    \subsection{Code smells}\label{subsec:code-smells}
    \TODO{
        Describe code smells in general, what are they, how were they found at first.
        Describe how to fix code smells.
        Describe why would you want to fix them.

        Add all of the implemented code smells into appendix, here we should bring some examples
        about the code smells.

        Bring some examples from the Fowler's list and then also describe
        those that we have implemented.
    }

    \subsection{Related work}\label{subsec:related-work}

    \TODO{
        Describe existing tools.
        Discuss their results and implementations.
        Here we can describe the same 3 tools that were used during the seminar:
        paprika, infusion and anti patterns code smells plugin for SonarQube.
    }

    In this section we will look into various tools that were developed to detect code smells
    and see how they performed during static analysis on corpuses of applications.
    We will look into three tools: \say{inFusion}, \say{paprika} and a SonarQube plugin called
    \say{anti patterns code smells} and see how accurate they are at detecting the code smells.

    \input{related_work.tex}

    \subsection{SonarQube}\label{subsec:sonarqube}

    \TODO{
        Describe what is SonarQube.
        Describe why was SonarQube chosen as implementation platform.
        Describe how can SonarQube be exnteded.
        Describe what does it mean to write a plugin for SonarQube: extension points (sensor/rule), what are the possibilities for the user
        (enabling/disabling rules), possibility to run both server side and inside an IDE (SonarLint).
    }

    \newpage


    \section{Method}\label{sec:method}

    \input{method.tex}

    \subsection{Datasets}\label{subsec:datasets}

    \input{datasets.tex}

    \subsection{Analysis procedure}\label{subsec:analysis-procedure}

    \input{analysis_procedure.tex}

    \newpage

    \section{Results}\label{sec:results}

    \subsection{Developed plugin}\label{subsec:developed-plugin}

    \input{dev_results.tex}

    \subsection{Analysis results}\label{subsec:analysis-results}

    \input{analysis_results.tex}

    \newpage
    \section{Discussion}\label{sec:discussion}

    \input{discussion.tex}

    \newpage

    \section{Conclusion}\label{sec:conclusion}

    \input{conclussion.tex}

% BibTeX bibliography
    \newpage
    \bibliographystyle{plainnat}
    \bibliography{masters-thesis-template}

    \addcontentsline{toc}{section}{\refname}


% Use Biblatex if you have problems with Estonian keywords
%\printbibliography %biblatex



    \newpage
%\appendix
%\section*{\appendixname}
    \iflanguage{english}%
    {\section*{Appendix}
        \addcontentsline{toc}{section}{Appendix}
    }%
    {\section*{Lisad}
        \addcontentsline{toc}{section}{Lisad}}


    \section*{I. Glossary}
    \addcontentsline{toc}{subsection}{I. Glossary}

    \newpage

%=== Licence in English
    \newcommand{\licencehint}[2]{\\\hspace*{#1}\textsl(#2)\par}
    \newcommand\EngLicence{{%
        \selectlanguage{english}
        \section*{II. Licence}

        \addcontentsline{toc}{subsection}{II. Licence}

        \subsection*{Non-exclusive licence to reproduce thesis and make thesis public}

        I, \textbf{Stanislav Mõškovski}, %author's name
        \licencehint{10mm}{author's name}

        \begin{enumerate}
            \item
            herewith grant the University of Tartu a free permit (non-exclusive licence) to
            \par
            reproduce, for the purpose of preservation, including for adding to the DSpace digital archives until the expiry of the term of copyright,
            \par
            \textbf{Building a tool for detecting code smells in Android application code}, %
            \licencehint{10mm}{title of thesis}
            \par
            supervised by Kristiina Rahkema and Dietmar Pfahl. %supervisor's name
            \licencehint{10mm}{supervisor's name}
            \item
            I grant the University of Tartu a permit to make the work specified in p. 1 available to the public via the web environment of the University of Tartu, including via the DSpace digital archives, under the Creative Commons licence CC BY NC ND 3.0, which allows, by giving appropriate credit to the author, to reproduce, distribute the work and communicate it to the public, and prohibits the creation of derivative works and any commercial use of the work until the expiry of the term of copyright.
            \item
            I am aware of the fact that the author retains the rights specified in p. 1 and 2.
            \item
            I certify that granting the non-exclusive licence does not infringe other persons' intellectual property rights or rights arising from the personal data protection legislation.
        \end{enumerate}

        \noindent
        Stanislav Mõškovski\\ %author's name
        \textbf{\textsl{dd/mm/yyyy}}
    }}%\newcommand\EngLicence


%=== Licence in Estonian
    \newcommand\EstLicence{{%
        \selectlanguage{estonian}
        \section*{II. Litsents}

        \addcontentsline{toc}{subsection}{II. Litsents}

        \subsection*{Lihtlitsents lõputöö reprodutseerimiseks ja üldsusele kättesaadavaks tegemiseks}

        Mina, \textbf{Alice Cooper}, %author's name
        \licencehint{10mm}{autori nimi}

        \begin{enumerate}
            \item
            annan Tartu Ülikoolile tasuta loa (lihtlitsentsi) minu loodud teose
            \par
            \textbf{Tüübituletus neljandat järku loogikavalemitele}, %title of thesis
            \licencehint{10mm}{lõputöö pealkiri}
            \par
            mille juhendaja(d) on Axel Rose ja May Flower, %supervisor's name(s)
            \licencehint{10mm}{juhendaja nimi}
            \par
            reprodutseerimiseks eesmärgiga seda säilitada, sealhulgas lisada digitaalarhiivi DSpace kuni autoriõiguse kehtivuse lõppemiseni.
            \par
            \item
            Annan Tartu Ülikoolile loa teha punktis 1 nimetatud teos üldsusele kättesaadavaks Tartu Ülikooli veebikeskkonna, sealhulgas digitaalarhiivi DSpace kaudu Creative Commonsi litsentsiga CC BY NC ND 3.0, mis lubab autorile viidates teost reprodutseerida, levitada ja üldsusele suunata ning keelab luua tuletatud teost ja kasutada teost ärieesmärgil, kuni autoriõiguse kehtivuse lõppemiseni.
            \item
            Olen teadlik, et punktides 1 ja 2 nimetatud õigused jäävad alles ka autorile.
            \item
            Kinnitan, et lihtlitsentsi andmisega ei riku ma teiste isikute intellektuaalomandi ega isikuandmete kaitse õigusaktidest tulenevaid õigusi.
        \end{enumerate}

        \noindent
        Alice Cooper\\ %author's name
        \textbf{\textsl{pp.kk.aaaa}}
    }}%\newcommand\EstLicence


%===Choose the licence in active language
    \iflanguage{english}{\EngLicence}{\EstLicence}


\end{document}

